{"version":3,"sources":["webpack:///./src/pages/Bathrooms.js","webpack:///./src/actions.js","webpack:///./src/components/presentational/Input.js","webpack:///./src/utils/Listing.js","webpack:///./node_modules/@material-ui/icons/ArrowBack.js"],"names":["Bathrooms","state","bathrooms","responseText","lr","svr","handleInput","evt","_this$setState","_evt$target","target","value","name","_this","setState","onSubmit","data","parseInt","props","submitBathrooms","listing","accommodates","bedrooms","guests","bed_type","handleBedType","placeType","roomType","numOfBedrooms","beds","numOfBedsAvailable","property_type","handlePropertyType","propertyType","number_of_reviews","numberOfRatings","review_scores_rating","reviewScoresRating","model","location","city","replace","toLowerCase","season","getModel","process","then","models","coefficients","svm","lrtext","calculatePrice","accuracy","svrtext","catch","err","parseFloat","intercepts","toFixed","property","bed","render","_this2","this","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","className","ContainerStyles","formTitle","_components_presentational_Input__WEBPACK_IMPORTED_MODULE_4__","label","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8___default","onClick","switchPages","_material_ui_icons_ArrowBack__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_icons_ArrowForward__WEBPACK_IMPORTED_MODULE_9___default","formPrice","React","Component","connect","_ref","reducer","page","response","dispatch","pageNumber","__webpack_require__","d","__webpack_exports__","submitPlaceType","submitBedrooms","submitLocation","submitListingData","_constants__WEBPACK_IMPORTED_MODULE_0__","type","SWITCH_PAGES","payload","SUBMIT_PLACE_TYPE","SUBMIT_BEDROOMS","SUBMIT_BATHROOMS","SUBMIT_LOCATION","SUBMIT_LISTING_DATA","react__WEBPACK_IMPORTED_MODULE_1___default","ComponentStyles","inputContainer","onChange","Axios__WEBPACK_IMPORTED_MODULE_0__","Axios__WEBPACK_IMPORTED_MODULE_0___default","n","url","options","method","JSON","stringify","console","log","Axios","res","_interopRequireDefault","Object","defineProperty","exports","default","_react","_default","Fragment","fill"],"mappings":"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","file":"component---src-pages-bathrooms-js-b91f3e80e9560a2cc92c.js","sourcesContent":["import React from \"react\"\nimport Input from \"../components/presentational/Input\"\nimport { connect } from 'react-redux';\nimport ContainerStyles from \"../styles/form.module.css\"\nimport {submitBathrooms,switchPages} from '../actions'\nimport Button from '@material-ui/core/Button';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport {getModel,sendModel} from \"../utils/Listing\"\n\nclass Bathrooms extends React.Component {\n  state = {\n    bathrooms:\"\", \n    responseText: \"\",\n    lr:\"\",\n    svr: \"\",\n\n  }\n\n  handleInput = (evt) => {\n    const { value,name } = evt.target;\n    this.setState({ [name] : value})\n  }\n\n  onSubmit = (evt) => {\n\n    const data = parseInt(this.state.bathrooms)\n    \n    this.props.submitBathrooms(data)\n    // this.props.submitListing()\n    const listing = {\n      accommodates: this.props.listing.bedrooms.guests,\n      bathrooms: parseInt(this.state.bathrooms),\n      bed_type: this.handleBedType(this.props.listing.placeType.roomType),\n      bedrooms: this.props.listing.bedrooms.numOfBedrooms,\n      beds: this.props.listing.bedrooms.numOfBedsAvailable,\n      property_type: this.handlePropertyType(this.props.listing.placeType.propertyType),\n      number_of_reviews: this.props.listing.listing.numberOfRatings,\n      review_scores_rating: this.props.listing.listing.reviewScoresRating\n    }\n    \n    const model = { \n      location: this.props.listing.location.city.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g,\"\").toLowerCase() ,\n      season: this.props.listing.listing.season \n    }\n\n    this.setState({\n      responseText: \"loading..\",\n    }, () => {\n      getModel(`${process.env.API_URL}/models/model`,model)\n      .then((model)=> {\n        const lr = model[0].models[0].coefficients\n        const svm = model[0].models[1].coefficients\n  \n        const lrtext = `price: ${this.calculatePrice(listing,lr)},\\n algorithm: Linear Regression with Gradient Boosting, R^2 score: ${model[0].models[0].accuracy}`\n        const svrtext = `price: ${this.calculatePrice(listing,svm)},\\n algorithm: Support Vector Regression with Gradient Boosting, R^2 score: ${model[0].models[1].accuracy}`\n  \n        this.setState({responseText: \"\",lr:lrtext, svr: svrtext, })\n      })\n      .catch((err)=> {\n\n        this.setState({responseText: \"sorry, pls try again\"})\n      })\n    })\n  }\n  \n\n  calculatePrice = (listing,coefficients) => {\n    const m1 = parseFloat(listing.accommodates * coefficients.accommodates)\n    const m2 = parseFloat(listing.beds * coefficients.beds)\n    const m3 = parseFloat(listing.bedrooms * coefficients.bedrooms)\n    const m4 = parseFloat(listing.bathrooms * coefficients.bathrooms)\n    const m5 = parseFloat(listing.bed_type * coefficients.bed_type)\n    const m6 = parseFloat(listing.property_type * coefficients.property_type)\n    const m7 = parseFloat(listing.number_of_reviews * coefficients.number_of_reviews)\n    const m8 = parseFloat(listing.review_scores_rating * coefficients.review_scores_rating)\n\n    // return m1\n    return (m1 + m2 + m3 + m4 + m5 + m6 + m7 + m8 + coefficients.intercepts).toFixed(2)\n  }\n\n  handlePropertyType = property => {\n    let value = 1;\n    switch(property) {\n      case \"Apartment\": \n        value = 1;\n        break;\n      case \"House\": \n        value = 2;\n        break;  \n      case \"Townhouse\": \n        value = 3;\n        break;    \n      case \"Loft\": \n        value = 4;\n        break;\n      case \"Condominium\": \n        value = 5;\n        break;       \n      case \"Serviced Apartment\": \n        value = 6;\n        break;   \n      case \"Guest Suite\": \n        value = 7;\n        break;   \n      case \"Other\": \n        value = 8;\n        break;   \n      case \"Bed & Breakfast\": \n        value = 9;\n        break;   \n      case \"Boutique Hotel\": \n        value = 10;\n        break;  \n      case \"Resort\": \n        value = 11;\n        break;    \n      case \"Guest House\": \n        value = 12;\n        break;   \n      case \"Hostel\": \n        value = 13;\n        break;   \n      case \"Timeshare\": \n        value = 15;\n        break;   \n      default: \n        value = 1;\n        break;   \n    }\n    return value;\n  }\n\n  handleBedType = bed => {\n    let value = 1;\n    switch(bed) {\n      case \"Entire home/apartment\": \n        value = 1;\n        break;\n      case \"Private room\": \n        value = 2;\n        break;  \n      case \"Shared room\": \n        value = 3;\n        break;      \n      default: \n        value = 1;\n        break;   \n    }\n    return value;\n  }\n\n  render(){\n    return (\n        <div>\n          <div className={ContainerStyles.formTitle}> Bathrooms </div>\n          <Input label=\"How many bathrooms are there?\" name={\"bathrooms\"} value={this.state.bathrooms} handleInput={this.handleInput}/>\n          <Button onClick={() => { this.props.switchPages(3)}}><ArrowBack /> ListingType </Button>\n          <Button onClick={this.onSubmit}> Submit <ArrowForward /></Button>\n          {/* {this.state.responseText} */}\n          <br/>\n          <br/>\n          <div className={ContainerStyles.formPrice}> {this.state.responseText} </div>\n          <div className={ContainerStyles.formPrice}> {this.state.lr} </div>\n          <div className={ContainerStyles.formPrice}> {this.state.svr} </div>\n\n        </div>\n    )\n  }\n};\n\nconst mapStateToProps = ({reducer}) => ({\n  page: reducer.page,\n  response: reducer.response,\n  listing: reducer\n})\n\nconst mapDispatchToProps = dispatch => ({\n  submitBathrooms: (data) => dispatch(submitBathrooms(data)),\n  switchPages: (pageNumber) => dispatch(switchPages(pageNumber)),\n })\nexport default connect(mapStateToProps, mapDispatchToProps)(Bathrooms);\n\n","import {\n  SUBMIT_PLACE_TYPE,\n  SUBMIT_BEDROOMS,\n  SUBMIT_BATHROOMS,\n  SUBMIT_LOCATION,\n  SUBMIT_LISTING_DATA,\n  SUBMIT_LISTING_SUCCESS,\n  SUBMIT_LISTING_ERROR,\n  SWITCH_PAGES,\n} from './constants'\nimport { getModel } from \"./utils/Listing\"\n\nexport const switchPages = pageNumber => dispatch => {\n  dispatch({ \n    type: SWITCH_PAGES,\n    payload: pageNumber\n  })\n}\n\nexport const submitPlaceType = data => dispatch => {\n dispatch({ \n    type: SUBMIT_PLACE_TYPE,\n    payload: data\n  })\n}\n\nexport const submitBedrooms = data => dispatch => {\n  dispatch({ \n    type: SUBMIT_BEDROOMS,\n    payload: data\n  })\n}\n\nexport const submitBathrooms = data => dispatch => {\n  dispatch({ \n    type: SUBMIT_BATHROOMS,\n    payload: data\n  })\n}\n\nexport const submitLocation = data => dispatch => {\n  dispatch({ \n    type: SUBMIT_LOCATION,\n    payload: data\n  })\n}\n\nexport const submitListingData = data => dispatch => {\n  dispatch({ \n    type: SUBMIT_LISTING_DATA,\n    payload: data\n  })\n}\n\nexport function getCoefficients() {\n\n  return (dispatch, getState) => {\n    const givenModel = getState().reducer;\n    const model = {\n      location: givenModel.location,\n      season: givenModel.season\n    }\n    return getModel(`${process.env.API_URL}/models`,model)\n            .then((res) => { dispatch(submitListingSuccess(res)) })\n            .catch((err) => {dispatch(submitListingError(err))})\n  }\n}\n\nexport const submitListingSuccess = (response) => dispatch => {\n  dispatch({ \n    type: SUBMIT_LISTING_SUCCESS,\n    payload: response\n  })\n}\nexport const submitListingError = (error) => dispatch => {\n  dispatch({ \n    type: SUBMIT_LISTING_ERROR,\n    payload: error\n  })\n}","import React from \"react\"\nimport ComponentStyles from \"../../styles/component.module.css\"\n\nexport default ({label,value,name,handleInput}) => (\n   <div className={ComponentStyles.inputContainer}>\n    <div className={ComponentStyles.label}>{label} </div> \n    <input label={label} name={name} value={value} onChange={handleInput}/> \n  </div>\n)\n","\nimport Axios from \"Axios\"\nexport function sendModel(url,model){\n  const options = {\n    method: 'post',\n    url: url,\n    data: JSON.stringify(model)\n  }\n\n  return Axios(options)\n    .then((res) => {\n      return res.data\n    })\n    .catch((err) => {\n      return err;\n    });\n}\n\nexport function getModel(url,model){\n  const options = {\n    method: 'post',\n    url: url,\n    data: JSON.stringify(model)\n  }\n\n  console.log(JSON.stringify(model))\n  return Axios(options)\n    .then((res) => {\n      return res.data\n    })\n    .catch((err) => {\n      return err;\n    });\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}), _react.default.createElement(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n})), 'ArrowBack');\n\nexports.default = _default;"],"sourceRoot":""}